# 인프콘

- [타입스크립트는 왜 그럴까?: 집합으로 이해하는 타입스크립트 - 이정환](#타입스크립트는-왜-그럴까-집합으로-이해하는-타입스크립트---이정환)

<br>

## 타입스크립트는 왜 그럴까?: 집합으로 이해하는 타입스크립트 - 이정환

### 1. 타입을 집합으로 이해하기

집합(set): 특정 조건에 맞는 원소들의 모임

타입스크립트의 타입들은 전부 집합으로 이루어져있다.


![image-20230906101632756](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906101632756.png)

예를 들면 문자열들의 집합을 `string`타입 숫자들의 집합을 `number`타입 그리고 진위 값들의 집합을 `boolean`타입이라 할 수 있다.


![image-20230906101614778](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906101614778.png)

변수를 특정 타입으로 정한다는 것은 해당 타입의 집합 안에 속한 값만 허용한다는 뜻이다.


<img src="https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906101931470.png" alt="image-20230906101931470" style="zoom: 80%;" /> <img src="https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906101942128.png" alt="image-20230906101942128"  />

타입스크립트에서는`Number`타입처럼 다른 타입의 부모 집합 역할을 하는 타입을 **슈퍼 타입** 반대 `Number 리터럴`타입처럼 다른 타입의 부분 집합 역할을 하는 타입을 **서브 타입**이라고 합니다.


![image](https://github.com/ddullgi/ddullgi/assets/97648143/a90b888f-95cc-4bea-a2f6-d6502840dc46)

다른 모든 타입들도 슈퍼-서브 관계가 성립하여 위와 같은 계층도로 나타낼 수 있다. 


### 2. 타입 호환성 이해하기

타입 호환성은 특정 타입의 값을 다른 타입으로 취급해도 괜찮은지 판단하는 것으로 이는 타입간의 **슈퍼-서브 관계**를 기준으로 판단 된다.


![image](https://github.com/ddullgi/ddullgi/assets/97648143/98eec42c-d812-44ad-a82e-77ae41f60a44)

일반적으로 더 큰 집합으로 취급하는 업 캐스팅은 가능하지만 집합의 크기를 줄이는 다운 캐스팅은 불가능하다.


![image](https://github.com/ddullgi/ddullgi/assets/97648143/47820c8c-66ef-405c-a767-f71ebb350ede)


#### 3. 타입 계층도 살펴보기

**Unknown 타입**

![image](https://github.com/ddullgi/ddullgi/assets/97648143/ba23f458-d805-4920-841d-c81b435daf65)

- 모든 타입의 슈퍼 타입 즉, 전체 집합으로 모든 타입의 값을 저장할 수 있음(업 캐스팅)

- 반대로 어떤 타입의 변수에도 Unknown 타입을 저장할 수 없음(다운 캐스팅)



- 현재 값의 정확한 타입을 알기 어려울 때 사용

```typescript
function foo(value: unknown) {
  if (typeof value === 'number') {
    return value.toFixed();
  } else if (typeof value === 'string') {
    return value.toLocaleLowerCase();
  } else {
    return value;
  }
}

foo(1);
foo('hello');
foo(undefined);
```

- 이렇게 Unknown 타입으로  받은 변수를 **타입 좁히기**와 함께 유연하게 사용할 수 있다.



> 타입 좁히기
>
> 위 코드에서 `if (typeof value === 'number')`와 같이 타입 조건을 지정하면 해당 if문 안에서 type이 보장될 수 있다.



**Never 타입**

![image-20230906104911613](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906104911613.png)

- 모든 타입의 서브 타입 즉,  공집합으로 어떤 타입의 값도 저장할 수 있음(다운 캐스팅)

- 반대로 어떤 타입의 변수에도 Never 타입을 저장할 수 있음(업 캐스팅)


- 호출되지 않아야 하는 함수를 만들 때(정상적인 상황에서 도달할 수 없는 함수)

```typescript
// 호출시 오류가 발생하는 함수
function error(v: never) {
  throw new Error();
}
```

![image](https://github.com/ddullgi/ddullgi/assets/97648143/7b37bb4c-580a-468d-85f1-0c5990e787f2)

위 함수는 도저히 써먹을 데가 없어보는데 어디에 사용할까?

Switch문의 완전성을 보장하기 위해 활용가능

![image](https://github.com/ddullgi/ddullgi/assets/97648143/6b15df4f-20c9-4426-ab96-6b588dd2766e)

위의 코드를 보면 타입 중에 `BLUE`를 빼먹은 것을 볼 수 있다. 이와 같은 문을 완전성이 보장되지 않은 switch문이라고 부른다.



위 코드에서 `BLUE`추가 하게 되면 타입 추론에 의해 default로 들어가는 타입이 존재하지 않게 되어 `error`메서드의 빨간줄이 사라지게 된다. 이를 통해 완전성이 보장된 switch문을 만들 수 있다.

![image](https://github.com/ddullgi/ddullgi/assets/97648143/3060ceb6-0355-4703-9508-b665ea1fe6a4)



**Any 타입(치트키)**

![image-20230906130214950](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906130214950.png)

- 타입 검사 자체를 받지 않음
- 모든 타입의 슈퍼 타입으로도 서브 타입으로도 동작한다.

![image](https://github.com/ddullgi/ddullgi/assets/97648143/8537ddfe-5735-4402-b0ae-9b7d2335e3ed)

- 단 예외적으로 Never 타입의 변수에 저장 불가


- 불가능한 타입 단언을 가능케 할 수 있음

  ![image](https://github.com/ddullgi/ddullgi/assets/97648143/45ab3642-8b41-48f3-bb46-555726524f8d)


### Quiz.

![image](https://github.com/ddullgi/ddullgi/assets/97648143/047ee76b-22d2-4a9e-bcd3-eb8de6dfea84)

- never
- string
- string
- unknown


### 4. 객체 타입 집합

타입스크립트는 구조적 타입 시스템을 따른다. 즉, 프로퍼티를 기준으로 타입을 정의한다.

![image](https://github.com/ddullgi/ddullgi/assets/97648143/d39ee760-48e3-4c64-bced-6cd78073e5a1)

![image-20230906154709845](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906154709845.png)

`Student` 타입은 `Person` 타입의 서브 타입이 된다.



### 5. 대수 타입과 집합

둘 이상의 타입을 합쳐서 만든 타입

![image-20230906155046813](https://raw.githubusercontent.com/ddullgi/image_sever/master/img/image-20230906155046813.png)

